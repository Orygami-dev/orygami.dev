---
const testimonials = [
  {
    name: 'Marie Dupont',
    role: 'Restauratrice',
    company: 'Le Gourmet',
    content: 'Un travail remarquable ! Mon nouveau site reflète parfaitement l\'ambiance de mon restaurant. Les réservations en ligne ont augmenté de 40% depuis la mise en ligne.',
    color: '#FEF0D3',
  },
  {
    name: 'Jean-Pierre Laurent',
    role: 'Médecin généraliste',
    company: 'Cabinet Médical du Parc',
    content: 'Très professionnel et à l\'écoute. Le site est clair, rassurant pour mes patients, et la prise de rendez-vous en ligne leur facilite vraiment la vie.',
    color: '#D4EFEA',
  },
  {
    name: 'Sophie Renard',
    role: 'Gérante',
    company: 'Boutique Élégance',
    content: 'Je suis ravie du résultat ! Le design est élégant et met parfaitement en valeur mes collections. Un vrai plus pour mon image de marque.',
    color: '#E6F4F0',
  },
];

const rotations = ['-1deg', '1.5deg', '-0.5deg'];
---

<section id="temoignages" class="testimonials">
  <div class="testimonials__container">
    <div class="testimonials__header">
      <h2 class="testimonials__title">Ce qu'en disent mes clients</h2>
      <p class="testimonials__intro">
        La satisfaction de mes clients est ma plus grande fierté.
      </p>
    </div>

    <div class="testimonials__grid">
      {testimonials.map((testimonial, i) => (
        <article class="testimonial-card" style={`background: ${testimonial.color}; transform: rotate(${rotations[i]});`}>
          <p class="testimonial-card__content">"{testimonial.content}"</p>
          <div class="testimonial-card__author">
            <div class="testimonial-card__info">
              <span class="testimonial-card__name">{testimonial.name}</span>
              <span class="testimonial-card__role">{testimonial.role}, {testimonial.company}</span>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style lang="scss">
  @use '../styles/variables' as *;
  @use '../styles/mixins' as *;

  .testimonials {
    @include section;
    background: transparent;

    &__container {
      @include container;
    }

    &__header {
      text-align: center;
      max-width: 600px;
      margin: 0 auto 4rem;
    }

    &__title {
      font-family: 'Caveat', cursive;
      font-size: 2.5rem;
      margin-bottom: 1rem;

      @include md {
        font-size: 3rem;
      }
    }

    &__intro {
      color: $text-light;
      font-size: 1.125rem;
    }

    &__grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;

      @include md {
        grid-template-columns: repeat(2, 1fr);
      }

      @include lg {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  }

  .testimonial-card {
    padding: 1.75rem 1.5rem;
    border: none;
    border-radius: 2px;
    box-shadow: 2px 3px 8px rgba(0, 0, 0, 0.1);
    position: relative;
    transition: box-shadow 0.3s ease;

    &:hover {
      box-shadow: 3px 5px 12px rgba(0, 0, 0, 0.14);
    }

    &::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, transparent 50%, rgba(0, 0, 0, 0.04) 50%);
    }

    &__content {
      font-size: 0.95rem;
      line-height: 1.7;
      color: $text;
      margin-bottom: 1.5rem;
      font-style: italic;
    }

    &__author {
      display: flex;
      align-items: center;
    }

    &__info {
      display: flex;
      flex-direction: column;
    }

    &__name {
      font-family: 'Caveat', cursive;
      font-size: 1.25rem;
      font-weight: 700;
      color: $text;
    }

    &__role {
      font-size: 0.8rem;
      color: $text-light;
    }
  }
</style>
